<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>荟医 Admin</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="../lib/bootstrap/css/bootstrap.css">
    
    <link rel="stylesheet" type="text/css" href="../stylesheets/theme.css">
    <link rel="stylesheet" href="../lib/font-awesome/css/font-awesome.css">

    <script src="../lib/jquery-1.7.2.min.js" type="text/javascript"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body class="">

		<div class="navbar">
			<div class="navbar-inner">
				<a class="brand" href="papers"><span class="first">公司</span> <span class="second">荟医</span></a>

				<ul class="nav pull-right">
					<li id="fat-menu" class="dropdown">
						<a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">
							<i class="icon-user"></i> TODO User
						</a>
					</li>
				</ul>
			</div>
		</div>

		<div class="sidebar-nav">
			<a href="#dashboard-menu" class="nav-header" data-toggle="collapse"><i class="icon-dashboard"></i>Dashboard</a>

			<ul id="dashboard-menu" class="nav nav-list collapse in">
				<li><a href="papers">Paper List</a></li>
				<li><a href="add_paper">Add Paper</a></li>
			</ul>
		</div>
    

    
    <div class="content">
        
        <div class="header">
            <h1 class="page-title">Paper List</h1>
        </div>
        
        <div class="container-fluid">
					<div class="row-fluid">

						<!--<div class="btn-toolbar">-->
							<!--<button class="btn btn-primary"><i class="icon-plus"></i> Add Paper</button>-->
						<!--</div>-->

						<div class="well">
							<table class="table">
								<thead>
								<tr>
									<th>试卷id</th>
									<th>试卷标题</th>
									<th>试卷描述</th>
									<th>创建时间</th>
									<th>修改时间</th>
									<th>操作者</th>
									<th style="width: 26px;"></th>
								</tr>
								</thead>
								<tbody id="paper_list">
								</tbody>
							</table>
						</div>
						<!--<div class="pagination">-->
							<!--<ul>-->
								<!--<li><a href="#">Prev</a></li>-->
								<!--<li><a href="#">1</a></li>-->
								<!--<li><a href="#">2</a></li>-->
								<!--<li><a href="#">3</a></li>-->
								<!--<li><a href="#">4</a></li>-->
								<!--<li><a href="#">Next</a></li>-->
							<!--</ul>-->
						<!--</div>-->

					</div>
        </div>
    </div>
	<footer>
		<hr>
		<p class="pull-right">for <a href="#" title="公司名称" target="_blank">公司名称</a></p>
		<p>2017 <a href="#" target="_blank">lijingjing</a></p>
	</footer>	


    <script src="../lib/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript">
			$(document).ready(function() {
			  console.log('--------')
				$.ajax({
					type: 'POST',
					dataType: 'json',
					contentType: "application/json; charset=utf-8",
					url: '/list_paper',
					data: '',
					success: function(result) {
						if (result.code == 0) {
						  generatePaperList(result.data)
							return
						}
						alert('获取试卷信息失败')
					}
				})
			})

			function generatePaperList(papers) {
			  var html = ''
			  papers.forEach(function(paper) {
          html += `<tr>
					<td>${paper.id}</td>
					<td>${paper.title}</td>
					<td>${paper.desc}</td>
					<td>${paper.created_time}</td>
					<td>${paper.modified_time}</td>
					<td>${paper.operator}</td>
					<td>
						<a href="get_paper?id=${paper.id}"><i class="icon-pencil"></i></a>
					</td>
				</tr>`
				})
				$("#paper_list").html(html);
			}


    </script>
    
  </body>
</html>


