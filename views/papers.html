<% include header.html %>
<% include sidenav.html %>



<div class="content">

		<div class="header">
				<h1 class="page-title">Paper List</h1>
		</div>

		<div class="container-fluid">
			<div class="row-fluid">

				<!--<div class="btn-toolbar">-->
					<!--<button class="btn btn-primary"><i class="icon-plus"></i> Add Paper</button>-->
				<!--</div>-->

				<div class="well">
					<table class="table">
						<thead>
						<tr>
							<th>试卷id</th>
							<th>试卷标题</th>
							<th>试卷描述</th>
							<th>创建时间</th>
							<th>修改时间</th>
							<th>操作者</th>
							<th style="width: 16px;"></th>
							<th style="width: 16px;"></th>
							<th style="width: 16px;"></th>
						</tr>
						</thead>
						<tbody id="paper_list">
						</tbody>
					</table>
				</div>
				<!--<div class="pagination">-->
					<!--<ul>-->
						<!--<li><a href="#">Prev</a></li>-->
						<!--<li><a href="#">1</a></li>-->
						<!--<li><a href="#">2</a></li>-->
						<!--<li><a href="#">3</a></li>-->
						<!--<li><a href="#">4</a></li>-->
						<!--<li><a href="#">Next</a></li>-->
					<!--</ul>-->
				<!--</div>-->

			</div>
		</div>
</div>
<footer>
<hr>
<p class="pull-right">for <a href="#" title="公司名称" target="_blank">公司名称</a></p>
<p>2017 <a href="#" target="_blank">lijingjing</a></p>
</footer>


<script type="text/javascript">
	$(document).ready(function() {
		console.log('--------')
		$.ajax({
			type: 'POST',
			dataType: 'json',
			contentType: "application/json; charset=utf-8",
			url: '/list_paper',
			data: '',
			success: function(result) {
				if (result.code == 0) {
					generatePaperList(result.data)
					return
				}
				alert('获取试卷信息失败')
			}
		})
	})

	function generatePaperList(papers) {
		var html = ''
		papers.forEach(function(paper) {
			html += `<tr>
			<td>${paper.id}</td>
			<td>${paper.title}</td>
			<td>${paper.desc}</td>
			<td>${paper.created_time}</td>
			<td>${paper.modified_time}</td>
			<td>${paper.operator}</td>
			<td>
				<a href="get_paper?id=${paper.id}"><i class="icon-pencil"></i></a>
			</td>
			<td>
				<a href="questions?paper_id=${paper.id}"><i class="icon-th-list"></i></a>
			</td>
			<td>
				<a href="preview_paper?id=${paper.id}"><i class="icon-file"></i></a>
			</td>
		</tr>`
		})
		$("#paper_list").html(html);
	}


</script>
<% include footer.html %>

